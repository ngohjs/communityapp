## Relevant Files

- `docs/tasks/prd-community-app.md` - Source PRD describing scope, acceptance criteria, and constraints.
- `backend/app/main.py` - FastAPI application entry point; mount routers and middleware here.
- `backend/app/config.py` - Centralized settings module for environment configuration.
- `backend/app/database.py` - SQLAlchemy engine/session utilities (new) backing all DB access.
- `backend/app/models/user.py` - SQLAlchemy models for users, profiles, preferences, sessions.
- `backend/app/models/content.py` - Models for categories, content items, comments, likes, audit logs.
- `backend/app/schemas/auth.py` - Pydantic schemas for auth requests/responses.
- `backend/app/schemas/profile.py` - Schemas for profile data and privacy preferences.
- `backend/app/schemas/content.py` - Schemas for content management (admin + member views).
- `backend/app/schemas/comment.py` - Schemas for comment payloads and responses.
- `backend/app/schemas/like.py` - Schemas for like responses.
- `backend/app/api/routes/content.py` - Member-facing content listing and (future) detail endpoints.
- `backend/tests/test_content_member.py` - Backend tests for member content listing.
- `backend/app/api/routes/auth.py` - Auth endpoints (register, verify, login, refresh, password reset).
- `backend/app/api/routes/profile.py` - Profile CRUD and privacy routes.
- `backend/app/api/routes/content.py` - Member-facing content browse/detail/engagement routes.
- `backend/app/api/routes/admin.py` - Admin content management and audit log endpoints.
- `backend/app/services/auth_service.py` - Business logic for auth flows, token management.
- `backend/app/services/content_service.py` - Business logic for content CRUD, publishing, and archival.
- `backend/app/services/comment_service.py` - Comment creation, update, and soft delete logic.
- `backend/app/services/like_service.py` - Helpers for liking/unliking content with uniqueness checks.
- `backend/app/services/download_service.py` - Generates signed download tokens for content files.
- `backend/app/services/notification_service.py` - Notification provider abstraction + stub implementation.
- `backend/app/services/audit_service.py` - Helper for persisting audit log entries across modules.
- `backend/app/services/profile_service.py` - Profile retrieval and update business logic.
- `backend/app/security.py` - Password hashing and token helpers for auth flows.
- `backend/app/utils/rate_limiter.py` - In-process rate limiter state for auth endpoints.
- `backend/app/middleware/rate_limit.py` - Middleware enforcing auth endpoint rate limits.
- `backend/app/dependencies.py` - Shared FastAPI dependencies (auth, DB helpers).
- `backend/app/utils/files.py` - Helpers for media storage (avatars, content files).
- `backend/app/services/notification_service.py` - Notification provider abstraction and stub implementation.
- `backend/app/schemas/audit.py` - Response schemas for audit log API.
- `backend/tests/test_auth.py` - Backend tests covering auth/session flows.
- `backend/tests/test_profile.py` - Backend tests validating profile endpoints.
- `backend/tests/test_notification_service.py` - Tests for notification provider stub behaviour.
- `backend/tests/test_admin_audit.py` - Tests covering audit log admin API filters and pagination.
- `backend/tests/test_content_admin.py` - Backend tests for admin content CRUD endpoints.
- `backend/tests/test_content_member.py` - Backend tests for member content listing, detail, likes, and comments.
- `backend/alembic/versions/0003_add_user_admin_and_privacy_defaults.py` - Migration adding admin flag and privacy defaults.
- `backend/.env` - Local environment overrides (e.g., database connection string).
- `backend/scripts/seed_dev.py` - Seeds admin user and categories for development environments.
- `backend/tests/test_profiles.py` - Tests for profile privacy and update flows.
- `backend/tests/test_content.py` - Tests for content listing, engagement, and admin operations.
- `frontend/package.json` - Update scripts/dependencies for Vite, Tailwind, shadcn/ui.
- `frontend/package-lock.json` - Locked dependency graph for frontend tooling.
- `frontend/index.html` - Vite HTML entry point mounting the React app.
- `frontend/vite.config.ts` - Vite configuration (new) replacing CRA tooling.
- `frontend/tailwind.config.ts` - Tailwind configuration (new) for styling system.
- `frontend/postcss.config.js` - Tailwind/PostCSS pipeline configuration.
- `frontend/tsconfig.json` - TypeScript project references for shared compiler options.
- `frontend/tsconfig.app.json` - TypeScript compiler options for the application bundle.
- `frontend/tsconfig.node.json` - TypeScript compiler options for Vite tooling context.
- `frontend/src/main.tsx` - React entry; set up Router, QueryClient, providers.
- `frontend/src/App.tsx` - Application shell/layout, route composition.
- `frontend/src/index.css` - Global styles loaded by Vite with Tailwind layers.
- `frontend/src/lib/react-query.ts` - Shared TanStack Query client and defaults.
- `frontend/src/lib/api/client.ts` - Axios/TanStack Query client with auth interceptors.
- `frontend/src/lib/api/profile.ts` - Helpers for profile fetch/update and avatar upload.
- `frontend/src/lib/api/content.ts` - Helpers for content list/detail API calls.
- `frontend/src/hooks/useProfileQuery.ts` - React Query hooks for profile data/mutations.
- `frontend/src/hooks/useContentLibrary.ts` - React Query hooks for content listing filters.
- `frontend/src/hooks/useContentDetail.ts` - React Query hooks for content detail, likes, and comments.
- `frontend/src/router.tsx` - Route configuration for application shell and feature modules.
- `frontend/src/layouts/AppLayout.tsx` - Top-level layout with header/footer shell.
- `frontend/src/routes/HomePage.tsx` - Landing page linking to auth/profile flows.
- `frontend/src/routes/content/LibraryPage.tsx` - Member content library with filters/search/pagination.
- `frontend/src/routes/content/ContentDetailPage.tsx` - Placeholder for content detail view.
- `frontend/src/hooks/useAdminContent.ts` - React Query helpers for admin content management.
- `frontend/src/routes/admin/AdminContentDashboard.tsx` - Admin UI for uploading and managing content.
- `frontend/src/lib/api/audit.ts` - Helpers for admin audit log API calls.
- `frontend/src/hooks/useAdminAuditLogs.ts` - React Query hooks for audit log pagination/filters.
- `frontend/src/routes/admin/AuditLogPage.tsx` - Admin audit log viewer.
- `frontend/src/providers/AuthProvider.tsx` - Auth context managing tokens and session refresh.
- `frontend/src/routes/NotFoundPage.tsx` - 404 experience with navigation recovery.
- `frontend/src/routes/auth/LoginPage.tsx` - Login form integrating with auth context.
- `frontend/src/routes/auth/RegisterPage.tsx` - Registration flow UI.
- `frontend/src/routes/auth/VerifyEmailPage.tsx` - Verification confirmation.
- `frontend/src/routes/auth/ForgotPasswordPage.tsx` - Reset request UI.
- `frontend/src/routes/auth/ResetPasswordPage.tsx` - Password reset form.
- `frontend/src/routes/auth/LogoutPage.tsx` - Logout confirmation view clearing session cookie.
- `frontend/src/routes/profile/ProfilePage.tsx` - Profile view with privacy-aware rendering.
- `frontend/src/routes/profile/EditProfilePage.tsx` - Profile edit form, avatar upload.
- `frontend/src/routes/profile/SettingsPage.tsx` - Notification and privacy settings UI.
- `frontend/src/routes/profile/ViewProfilePage.tsx` - Member profile view respecting privacy states.
- `frontend/src/routes/content/LibraryPage.tsx` - Content list with filters/search/pagination.
- `frontend/src/routes/content/ContentDetailPage.tsx` - Content detail, likes, comments, download.
- `frontend/src/routes/admin/AdminContentDashboard.tsx` - Admin CRUD interface for content.
- `frontend/src/routes/admin/AuditLogPage.tsx` - Admin audit log viewer.
- `frontend/src/components/forms/*` - Shared form components (input, select, file upload).
- `frontend/src/components/content/*` - Reusable content cards, comment list components.
- `frontend/src/__tests__/auth.test.tsx` - Frontend tests for auth flows.
- `frontend/src/__tests__/profile.test.tsx` - Tests for profile edit/privacy UI.
- `frontend/src/__tests__/content.test.tsx` - Tests for content list/detail interactions.
- `docker-compose.yml` - Update services and volumes to support new backend/frontend flow.
- `README.md` - Document setup, env vars, seed instructions, rollout notes.
- `backend/requirements.txt` - Python dependencies for the backend services.
- `backend/alembic.ini` - Alembic configuration for database migrations.
- `backend/alembic/env.py` - Alembic environment script tying into application metadata.
- `backend/alembic/versions/0001_initial_schema.py` - Initial migration creating core database tables.
- `backend/app/database.py` - SQLAlchemy engine and session helpers.
- `backend/app/models/user.py` - SQLAlchemy model for core user entity.
- `backend/app/models/profile.py` - Profile metadata linked to users.
- `backend/app/models/preference.py` - User notification/privacy preferences model.
- `backend/app/models/category.py` - Content category model for taxonomy.
- `backend/app/models/content.py` - Content items with metadata and relations.
- `backend/app/models/comment.py` - Member comments on content.
- `backend/app/models/like.py` - Like records with uniqueness constraint.
- `backend/app/models/session.py` - Persistent user session records.
- `backend/app/models/audit.py` - Audit log entries for system actions.
- `backend/app/models/password_reset.py` - Password reset token records and expiry tracking.
- `backend/app/models/__init__.py` - Aggregate exports for SQLAlchemy models.
- `backend/scripts/seed_dev.py` - Development seed script for categories and super-admin.
- `backend/scripts/__init__.py` - Package marker for backend scripts.
- `backend/tests/test_placeholder.py` - Temporary pytest placeholder ensuring suite passes.

### Notes

- Co-locate unit/integration tests alongside their implementation where practical (e.g., `module_test.py` next to `module.py`, `Component.test.tsx` next to `Component.tsx`).
- Use `pytest` for backend and `pnpm vitest` (or `npm run test`) for frontend; update scripts accordingly.
- Document seeded admin credentials securely and avoid committing actual secrets.

## Tasks

- [x] 1.0 Backend Platform & Database Foundations
  - [x] 1.1 Review existing FastAPI scaffold, define application settings module, and wire environment-based configuration.
  - [x] 1.2 Introduce SQLAlchemy engine/session helpers and register them as FastAPI dependencies.
  - [x] 1.3 Configure Alembic with base migration scripts and generate the initial schema migration for core tables.
  - [x] 1.4 Implement SQLAlchemy models (Users, Profiles, Preferences, Sessions, Categories, Content, Comments, Likes, AuditLogs) with indices and relationships.
  - [x] 1.5 Seed development data script for baseline categories and bootstrap super-admin account.

- [x] 2.0 Backend Authentication & Session Management
  - [x] 2.1 Build registration endpoint with validation, password hashing, pending status, and audit entry.
  - [x] 2.2 Implement email verification tokens, verification endpoint, and pending→active transition.
  - [x] 2.3 Implement login, refresh, logout endpoints issuing/rotating JWT access + HttpOnly refresh cookies, persisting tokens in `User_Sessions`.
  - [x] 2.4 Implement forgot/reset password flow with time-bound tokens, stub email dispatch, and logging.
  - [x] 2.5 Add in-process rate limiting middleware for auth endpoints (5 attempts per 15 minutes) and tests.

- [x] 3.0 Backend Profiles, Privacy & Preferences
  - [x] 3.1 Implement profile retrieval/update endpoints with validation and audit logging.
  - [x] 3.2 Add avatar upload handling (file validation, resize to 512x512, local storage path management).
  - [x] 3.3 Implement privacy preference persistence (Private/Community/Admin) and enforce visibility rules on profile fetch.
  - [x] 3.4 Implement notification preference toggles (content/community/account) and expose settings endpoint.

- [x] 4.0 Backend Content Library, Engagement & Admin Tools
  - [x] 4.1 Build admin content CRUD endpoints (create, update, archive) with metadata validation and file storage.
  - [x] 4.2 Implement member-facing content listing with filters, search, pagination, and response DTOs.
  - [x] 4.3 Implement content detail endpoint with signed download token generation and download logging.
  - [x] 4.4 Implement likes/comments endpoints with ownership checks, sanitization, and counter updates.
  - [x] 4.5 Ensure all content actions emit audit log entries for traceability.

- [x] 5.0 Backend Notifications Stub & Audit Logging
  - [x] 5.1 Implement notification provider interface and default stub that logs payloads.
  - [x] 5.2 Integrate notification triggers for key events (registration, verified account, new admin content) respecting user opt-in flags.
  - [x] 5.3 Build audit log service/API endpoint for admins with pagination and filters.

- [x] 6.0 Frontend Application Shell & Core Auth Flows
  - [x] 6.1 Replace CRA scaffold with Vite + React 19 + TypeScript + Tailwind configuration.
  - [x] 6.2 Configure routing, TanStack Query client, global styles, and basic layout/shell.
  - [x] 6.3 Implement registration, email verification, login, logout, forgot/reset password pages wired to backend.
  - [x] 6.4 Implement auth context/token refresh handling with Axios interceptors for HttpOnly cookie refresh process.

- [x] 7.0 Frontend Profile Management & Settings
  - [x] 7.1 Build profile view/edit forms with validation, avatar uploader, and API integration.
  - [x] 7.2 Implement privacy level selector and notification preference toggles with optimistic UI updates.
  - [x] 7.3 Ensure viewing other profiles respects privacy states; handle unauthorized/hidden cases gracefully.

- [x] 8.0 Frontend Content Experience & Admin Dashboard
  - [x] 8.1 Create content library page with filters, search, empty states, and pagination controls.
  - [x] 8.2 Build content detail page with preview metadata, likes/comments UI, and download action.
  - [x] 8.3 Build admin dashboard for content upload/edit/archive, including file validation and progress feedback.
  - [x] 8.4 Implement admin audit log viewer with filter controls and pagination.

- [x] 9.0 DevOps, Quality & Rollout Support
- [x] 9.1 Update Dockerfiles/docker-compose to support new build pipelines and persistent storage mounts.
- [x] 9.2 Configure linting/formatting (Ruff, Black, ESLint, Prettier) and add CI scripts or instructions.
- [x] 9.3 Document environment setup, `.env` variables, seed scripts, and deployment steps in README/docs.
- [x] 9.4 Add health check endpoint/tests, structured logging config, and placeholders for monitoring/metrics.

- [ ] 10.0 Terra Trust Design System Elevation *(see `docs/design/terra-trust-system-blueprint.md`)*
  - [ ] 10.1 Token Expansion — deliver primitive and semantic token sets (color, type, space, elevation, motion, density, dark mode) and wire them through CSS variables + Tailwind theme.
  - [ ] 10.2 Component Library — implement button, form controls, feedback, navigation, layout primitives with full state matrices and Storybook documentation.
  - [ ] 10.3 Motion & Feedback — codify duration/easing tokens, keyframe library, reduced motion handling, and apply choreography to overlays, nav, KPI, and notifications.
  - [ ] 10.4 Accessibility & Quality — focus strategy, skip links, aria instrumentation, automated axe checks, contrast audits with tokenized pairings.
  - [ ] 10.5 Cross-Platform & Performance — responsive/density guidance, mobile navigation patterns, font loading improvements, CSS delivery plan, component performance profiling.
  - [ ] 10.6 Portfolio Presentation — produce documentation site/motion reels and capture case study assets for award submissions.
